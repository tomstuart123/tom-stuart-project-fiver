(this["webpackJsonptom-stuart-project-fiver"]=this["webpackJsonptom-stuart-project-fiver"]||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/nigel-tadyanehondo-pXf4OH65OhE-unsplash.a1bc7900.jpg"},16:function(e,t,a){e.exports=a(27)},21:function(e,t,a){},22:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(13),o=a.n(r),i=(a(21),a(15)),l=a(7),m=a(1),c=a(2),u=a(4),p=a(3),h=a(5),g=(a(22),a(8)),d=a.n(g);a(24);d.a.initializeApp({apiKey:"AIzaSyAaI71MTS1gfeFk6RwBoLFf_eTTknSHlkw",authDomain:"chat-app-52f62.firebaseapp.com",databaseURL:"https://chat-app-52f62.firebaseio.com",projectId:"chat-app-52f62",storageBucket:"chat-app-52f62.appspot.com",messagingSenderId:"762254551362",appId:"1:762254551362:web:b3a0fa8d06c325962380db"});var f=d.a,N=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"messageInput"},n.a.createElement("form",{onSubmit:this.props.submitStore,className:"messageInputForm"},n.a.createElement("label",{htmlFor:"userMessage"}),n.a.createElement("input",{name:"userMessage",autoComplete:"off",id:"userMessage",type:"text",placeholder:"Your Message",value:this.props.userInput,className:"userMessage",onChange:this.props.trackChanges}),n.a.createElement("button",{onChange:this.props.trackChanges,type:"submit"},"Send")))}}]),t}(s.Component),b=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"totalMessages",id:this.props.hidden},n.a.createElement("div",null,n.a.createElement("p",{className:this.props.rightText},n.a.createElement("span",{className:"messageID"},this.props.userID),":",n.a.createElement("span",{className:"messageText"},this.props.userMessage),n.a.createElement("span",{className:"deleteYou",id:this.props.firebaseKey,onClick:this.props.cancelMessage},n.a.createElement("span",{className:this.props.userID,id:this.props.firebaseKey},"x"))),n.a.createElement("p",{id:"dateText",className:this.props.rightText},n.a.createElement("span",{className:"date"},this.props.sendDate))))}}]),t}(s.Component),v=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"page2"},n.a.createElement("div",{className:"page2Side"},n.a.createElement("div",{className:"page2SideTop"},n.a.createElement("h3",null,n.a.createElement("a",{href:"index.html"},"Chattr"),n.a.createElement("a",{href:"https://tomstuart123.github.io/chat-test/"},n.a.createElement("span",{className:"accent2"},"-3")))),n.a.createElement("div",{className:"page2SideBottom"},n.a.createElement("p",null,"Past Channels "),this.props.pastRoomNames.map((function(t){return n.a.createElement("a",{className:"pastRooms",id:t,onClick:e.props.switchRoom},"- ".concat(t))})))),n.a.createElement("div",{className:"page2Main"},n.a.createElement("nav",null,n.a.createElement("section",{className:"wrapper "},n.a.createElement("div",null,n.a.createElement("h3",{className:"navAlt"}," ",n.a.createElement("a",{href:"index.html"},"Chattr")," Room: ",this.props.statusChat),n.a.createElement("li",{onClick:this.props.goBackToStart},this.props.userName," sign out ")))),n.a.createElement("section",{className:"wrapper"},n.a.createElement("div",{className:"messagesBox"},n.a.createElement("div",null,this.props.messageList.map((function(t){return t.userID===e.props.userName?n.a.createElement(b,{rightText:e.props.rightText,userID:t.userID,userMessage:t.userMessage,sendDate:t.currentTime,cancelMessage:e.props.removeMessage,firebaseKey:t.userFirebaseKey}):n.a.createElement(b,{userID:t.userID,userMessage:t.userMessage,sendDate:t.currentTime,cancelMessage:e.props.removeMessage,firebaseKey:t.userFirebaseKey})})),n.a.createElement("div",{className:"lastMessage"}))),n.a.createElement(N,{userInput:this.props.userInput,trackChanges:this.props.handleChange,submitStore:this.props.handleSubmit}),n.a.createElement("p",{class:"tipText"},"Note - You can tell guest users from Members due to the 'guest' after their userName "))))}}]),t}(s.Component),S=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"signInForm"},n.a.createElement("label",{htmlFor:this.props.className}),n.a.createElement("input",{name:"{this.props.className}",autoComplete:"off",id:this.props.className,type:"text",placeholder:this.props.inputField,className:this.props.className,onChange:this.props.handleChange}))}}]),t}(s.Component),E=a(14),I=a.n(E),y=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"landingPage"},n.a.createElement("div",{className:"landingPageTop"},n.a.createElement("nav",null,n.a.createElement("section",{className:"wrapper "},n.a.createElement("div",null,n.a.createElement("li",{className:"logo logo-landing"}," ",n.a.createElement("a",{href:"index.html"},"Chattr"),n.a.createElement("a",{href:"https://tomstuart123.github.io/chat-test/"},n.a.createElement("span",{className:"accent"},"-3"))," "),n.a.createElement("li",{onClick:this.props.scrollDown},this.props.signOrLogin)))),n.a.createElement("section",{className:"wrapper "},n.a.createElement("h1",null," Virtual Chat for work, chill or play"),n.a.createElement("form",{className:"publicRoomInputForm",onSubmit:this.props.publicJoin},n.a.createElement("label",{for:"name"}),n.a.createElement(S,{name:"name",inputField:"Add name to trial as guest",className:"publicJoin",handleChange:this.props.handleChange}),n.a.createElement("button",{type:"submit",className:"submitPublic"},"Go to the Public Room")),n.a.createElement("div",{className:"scrollDownHolder"},n.a.createElement("button",{className:"scrollDown",onClick:this.props.scrollDown},"Sign up to Pro below")))),n.a.createElement("div",{className:"landingPageBottom"},n.a.createElement("section",{className:"wrapper "},n.a.createElement("h2",null," ",this.props.signOrLogin," to create and join your own private channels"),n.a.createElement("form",{className:"signInForm",onSubmit:this.props.signUpOrLogin},n.a.createElement("label",{class:"visuallyHidden",for:"name"}),n.a.createElement("p",{name:"name"},"Add a UserName"),n.a.createElement(S,{inputField:"Name",className:"signInName",handleChange:this.props.handleChange}),n.a.createElement("label",{class:"visuallyHidden",for:"password"}),n.a.createElement("p",null,"Add a Random Key"),n.a.createElement(S,{name:"password",inputField:"Your Memorable key",className:"signInRandomKey",handleChange:this.props.handleChange}),n.a.createElement("button",{type:"submit",className:this.props.signOrLogin},this.props.signOrLogin)),n.a.createElement("button",{className:"switchSign",onClick:this.props.switchSign},"Already done this? Switch to Login page"),n.a.createElement("div",{className:"imageContainer"},n.a.createElement("img",{src:I.a,alt:"sign saying how the user will sign up eventually"})))))}}]),t}(s.Component),C=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"roomPage"},n.a.createElement("div",{className:"roomPageTop"},n.a.createElement("nav",null,n.a.createElement("section",{className:"wrapper "},n.a.createElement("div",null,n.a.createElement("li",{className:"logo logo-landing"}," ",n.a.createElement("a",{href:"index.html"},"Chattr"),n.a.createElement("a",{href:"https://tomstuart123.github.io/chat-test/"},n.a.createElement("span",{className:"accent"},"-3"))," "),n.a.createElement("li",{onClick:this.props.goBackToStart},"Sign Out of ",this.props.userName)))),n.a.createElement("div",null,n.a.createElement("section",{className:"wrapper"},n.a.createElement("h1",null,"Hi ",this.props.userName,"! Welcome to your Chattr Lobby!"),n.a.createElement("h3",{className:"introText"},"This is your private space to help you get started "),n.a.createElement("div",{className:"roomPageForms"},n.a.createElement("form",{className:"createRoomInputForm",onSubmit:this.props.createRoom},n.a.createElement("h3",null,"Create a new chat room"),n.a.createElement("label",{class:"visuallyHidden",for:"createRoomName"}),n.a.createElement(S,{name:"createRoomName",inputField:"Name for the new room",className:"createRoom",handleChange:this.props.handleChange}),n.a.createElement("button",{type:"submit",className:"submitRoom"},"Create")),n.a.createElement("form",{className:"joinRoomInputForm",onSubmit:this.props.joinRoom},n.a.createElement("h3",null,"Join an existing chat room"),n.a.createElement("label",{class:"visuallyHidden",for:"joinRoomName"}),n.a.createElement(S,{name:"joinRoomName",inputField:"Existing room name",className:"joinRoom",handleChange:this.props.handleChange}),n.a.createElement("button",{type:"submit",className:"submitJoin"},"Join"))),n.a.createElement("button",{onClick:this.props.scrollDown,className:"existingRoomButton"}," Tip: Your last chatrooms were called:",this.props.pastRoomNames.map((function(e){return n.a.createElement("span",{className:"pastRooms"},"- ".concat(e))})))))))}}]),t}(s.Component),w=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(u.a)(this,Object(p.a)(t).call(this))).componentDidMount=function(){"true"===localStorage.userSignedIn&&e.setState({userSignedIn:!0,userName:localStorage.userName,userPW:localStorage.userPW}),e.findRoomsUserIsIn()},e.switchSign=function(){"Sign up"===e.state.switchSign?e.setState({switchSign:"Login"}):e.setState({switchSign:"Sign up"})},e.signUpOrLogin=function(t){t.preventDefault();var a=e.state.userInput,s=e.state.userInput2;"Sign up"===e.state.switchSign?e.signUp(a,s):"Login"===e.state.switchSign&&e.login(a,s)},e.signUp=function(t,a){var s=f.database().ref("users"),n=Date(Date.now()).toString(),r={userID:t,userPW:a,signUpTime:n};s.on("value",(function(a){var s=a.val();for(var n in s)s[n].userID==t&&e.setState({stop:!0})})),setTimeout((function(){if(a&&t)if(!0===e.state.stop)alert("sorry someone already has that user name. Try again."),e.setState({stop:!1});else if(!0===e.state.userSignedIn)alert("Already signed in I am afraid");else{var n=s.push(r);r.userFirebaseKey=n.key,s.child(n.key).update(r),e.setState({userName:t,userPW:a,userSignedIn:!0,userInput:""}),localStorage.setItem("userName",t),localStorage.setItem("userPW",a),localStorage.setItem("userSignedIn",!0)}else alert("please fill both sign in fields")}),500)},e.login=function(t,a){!0!==e.state.userSignedIn?f.database().ref("users").on("value",(function(s){var n=s.val(),r=[];for(var o in n)n[o].userID===t&&n[o].userPW.toString()===a&&(e.setState({userName:t,userPW:a,userSignedIn:!0,userInput:""}),r.push("match"),localStorage.setItem("userName",t),localStorage.setItem("userPW",a),localStorage.setItem("userSignedIn",!0));0===r.length&&alert("sorry, no username and ID matches those. Try again")})):alert("Already signed in. sign out when you can")},e.adjustPublicJoinStatus=function(t){t.preventDefault();var a=e.state.userInput;e.setState({publicJoin:!0,userInput:""}),e.groupChatStart(a)},e.scrollDown=function(e){e.preventDefault(),window.scrollBy(0,1e3)},e.groupChatStart=function(t){var a=t;!1===e.state.userSignedIn&&(a+=" (guest)"),f.database().ref("chatrooms").on("value",(function(t){var s=t.val()[e.state.roomName],n=[];for(var r in s)n.push(s[r]);e.setState({messageList:n,userName:a})}))},e.handleChange=function(t){"signInName"===t.target.className?e.setState({userInput:t.target.value}):"signInRandomKey"===t.target.className?e.setState({userInput2:t.target.value}):e.setState({userInput:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var a=f.database().ref("chatrooms"),s=e.state.userInput,n=Date(Date.now()).toString().slice(0,25),r={userID:e.state.userName,userMessage:s,currentTime:n,userFirebaseKey:""};if(s){var o=a.child(e.state.roomName).push(r);r.userFirebaseKey=o.key,a.child(e.state.roomName).child(o.key).update(r),e.setState({userInput:"",currentTime:"",userFirebaseKey:""})}var i=document.querySelector(".lastMessage");setTimeout((function(){i.scrollIntoView()}),100)},e.removeMessage=function(t){var a=f.database().ref("chatrooms");e.state.userName===t.target.className?a.child(e.state.roomName).child(t.target.id).remove():alert("You can only delete your own messages")},e.goBackToStart=function(t){t.preventDefault(),e.setState({clicked:!1,messageList:[],userInput:"",userInput2:"",userName:"Tom",userPW:"",currentTime:"",userFirebaseKey:"",publicJoin:!1,privateJoin:!1,privateCreate:!1,switchSign:"Sign up",stop:!1,userSignedIn:!1,roomName:"publicRoom",pastRoomNames:[],rightText:"rightText"}),localStorage.clear()},e.createRoom=function(t){t.preventDefault();var a=e.state.userInput,s=f.database().ref("chatrooms");s.on("value",(function(t){var s=t.val();for(var n in s)n.toString()==a.toString()&&e.setState({stop:!0})})),setTimeout((function(){if(""===a)alert("please fill a room name");else if(!0===e.state.stop)alert("sorry someone already has that room name. Try again."),e.setState({stop:!1});else{var t=Object(l.a)({},a,Object(l.a)({},"0",{userID:"Chattr Bot",userMessage:"Start chat below"}));s.update(t),e.setState({roomName:a,userInput:"",privateCreate:!0});var n=e.state.userName;e.groupChatStart(n)}}),300)},e.switchRoom=function(t){e.setState({userInput:t.target.id}),setTimeout((function(){e.joinRoom()}),300)},e.joinRoom=function(t){t&&t.preventDefault();var a=e.state.userInput;f.database().ref("chatrooms").on("value",(function(t){var s=t.val(),n=[];for(var r in s)r.toString()==a.toString()&&n.push("match");n.length>0?e.setState({stop:!1}):e.setState({stop:!0})})),setTimeout((function(){if(""===a)alert("please fill a room name");else if(!1===e.state.stop){e.setState({roomName:a,userInput:"",privateJoin:!0});var t=e.state.userName;e.groupChatStart(t)}else alert("sorry there are no room names with that title. Try again.")}),500)},e.findRoomsUserIsIn=function(){f.database().ref().on("value",(function(t){var a=[],s=[],n=t.val();for(var r in n)a.push(n[r]);for(var o in a[0])for(var l in a[0][o])a[0][o][l].userID.includes(e.state.userName.toLowerCase())&&s.push(o);var m=Object(i.a)(new Set(s));0===m.length?e.setState({pastRoomNames:["You haven't chatted in other rooms rooms yet"]}):"publicRoom"===m[0]?e.setState({pastRoomNames:["Only chatted as a guest"]}):m.length>0&&e.setState({pastRoomNames:m})}))},e.state={clicked:!1,messageList:[],userInput:"",userInput2:"",userName:"guest",userPW:"",hideClass:!0,hideClassName:"",currentTime:"",userFirebaseKey:"",publicJoin:!1,privateJoin:!1,privateCreate:!1,switchSign:"Sign up",stop:!1,userSignedIn:!1,roomName:"publicRoom",pastRoomNames:["You haven't chatted in other rooms rooms"],rightText:"rightText"},e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},this.state.publicJoin?n.a.createElement(v,{rightText:this.state.rightText,switchRoom:this.switchRoom,pastRoomNames:this.state.pastRoomNames,userName:this.state.userName,statusChat:this.state.roomName,userInput:this.state.userInput,handleChange:this.handleChange,handleSubmit:this.handleSubmit,messageList:this.state.messageList,removeMessage:this.removeMessage,goBackToStart:this.goBackToStart}):this.state.userSignedIn?this.state.privateCreate?n.a.createElement(v,{rightText:this.state.rightText,switchRoom:this.switchRoom,pastRoomNames:this.state.pastRoomNames,userName:this.state.userName,statusChat:this.state.roomName,userInput:this.state.userInput,handleChange:this.handleChange,handleSubmit:this.handleSubmit,messageList:this.state.messageList,removeMessage:this.removeMessage,goBackToStart:this.goBackToStart}):this.state.privateJoin?n.a.createElement(v,{rightText:this.state.rightText,switchRoom:this.switchRoom,pastRoomNames:this.state.pastRoomNames,userName:this.state.userName,statusChat:this.state.roomName,userInput:this.state.userInput,handleChange:this.handleChange,handleSubmit:this.handleSubmit,messageList:this.state.messageList,removeMessage:this.removeMessage,goBackToStart:this.goBackToStart}):n.a.createElement(C,{pastRoomNames:this.state.pastRoomNames,goBackToStart:this.goBackToStart,scrollDown:this.scrollDown,handleChange:this.handleChange,createRoom:this.createRoom,joinRoom:this.joinRoom,userName:this.state.userName}):n.a.createElement(y,{publicJoin:this.adjustPublicJoinStatus,handleChange:this.handleChange,signUpOrLogin:this.signUpOrLogin,switchSign:this.switchSign,signOrLogin:this.state.switchSign,scrollDown:this.scrollDown}))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.b76d6c55.chunk.js.map